Before Dr. Bobby Mukkamala — an ear, nose, and throat specialist in Michigan — prescribed postsurgical opioids recently, he checked state records of his patient’s existing controlled substance prescriptions, as legally required. A score generated by a proprietary algorithm appeared on his screen. Known as NarxCare (now used by most state prescription monitoring databases, major hospitals and pharmacy chains), the algorithm indicated his patient had an elevated risk of developing an addiction to opioid painkillers.

“I create a lot of pain when I operate,” said Dr. Mukkamala, who leads the American Medical Association’s Substance Use and Pain Task Force. “The nose and the face are very painful places to have procedures done.” Consequently, it is difficult to avoid prescribing opioids to manage pain.

Algorithms like NarxCare and a newly approved genetic test for opioid use disorder risk known as AvertD use machine learning techniques to try to help doctors reduce the odds that patients will become addicted to these medications.

Via NarxCare, most Americans now have an opaque equivalent of a controlled substance credit score, which they often don’t even know exists unless a doctor or pharmacist tells them that it’s a problem. (NarxCare’s manufacturer claims that its scores and reports “are intended to aid, not replace, medical decision making.”) And if it ever becomes widely used, AvertD, promoted as a way to use personalized genetics to assess risk, could put yet more difficult-to-challenge red flags on people’s records.