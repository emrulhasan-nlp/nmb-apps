France’s Parliament late Tuesday approved an immigration overhaul that was made tougher under right-wing pressure, securing a legislative win for President Emmanuel Macron but risking a political crisis for a leader elected twice on centrist vows to keep far-right populism at bay.

Hours after the bill was passed by the French Senate, it received 349 votes in favor and 186 against during a raucous late-night session in the National Assembly, the lower house, where Mr. Macron’s centrist party and its allies do not hold an absolute majority.

In a rare sign of dissent, 37 of Mr. Macron’s own party members voted against the bill or abstained, as did 22 lawmakers from other parties in his alliance. The far right, in an equally rare move, trumpeted its support for the government’s proposals, with all 88 of its lawmakers voting in favor.

The bill creates one-year, temporary residency permits under some conditions for skilled workers in fields experiencing labor shortages and streamlines the asylum process, but it also tightens rules allowing foreigners to work, live or study in France.